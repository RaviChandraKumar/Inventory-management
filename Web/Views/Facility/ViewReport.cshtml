@model Web.ViewModels.StandardIndexViewModel
@{
    ViewBag.Title = "Facilities";
}
<div class="tray_main">
    <h2>Report To Monitor Users Updates On Inventory</h2>

    <table class="table-bordered" id="report">
        <tr>
            <th>
                Facility Name
            </th>
            <th>
                Landmark
            </th>
            <th>
                Owner
            </th>
            <th style="width:35%">
                <table>
                    <tbody>
                        <tr>
                            <th>Resource Name</th>
                            <th>Initial Count</th>
                            <th>Current Count</th>
                            <th>Comment</th>
                        </tr>
                    </tbody>
                </table>
            </th>

        </tr>

        @foreach (var item in Model.Facilities)
        {
        <tr>

            <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Landmark)
            </td>
            <td>
                @foreach (var usr in item.UsersAssigned)
                {
                    @Html.DisplayFor(modelItem => usr.UserName)
                    <br />
                }
            </td>
            <td>
                <table>
                    @foreach (var res in item.ResourcesAssigned)
                    {
                        if (res.CurrentCount != res.InitialCount)
                        {
                    <tr style="color:white; Background: red;">
                        <td>@Html.ActionLink(res.Name, "Edit/" + res.Id, "Resource")</td>
                        <td>@Html.DisplayFor(modelItem => res.InitialCount)</td>
                        <td>@Html.DisplayFor(modelItem => res.CurrentCount)</td>
                        <td>@Html.DisplayFor(modelItem => res.Comment)</td>
                    </tr>
                        }
                        else
                        {
                    <tr style="color:white; Background:lightgreen">
                        <td>@Html.ActionLink(res.Name, "Edit/" + res.Id, "Resource")</td>
                        <td>@Html.DisplayFor(modelItem => res.InitialCount)</td>
                        <td>@Html.DisplayFor(modelItem => res.CurrentCount)</td>
                        <td>@Html.DisplayFor(modelItem => res.Comment)</td>
                    </tr>
                        }
                    }
                </table>
            </td>
        </tr>
  }
    </table>
    <br />
</div>

<div>
    @Html.ActionLink("Back to List", "Index")
</div>
@*<script>
    function Backgroundcolor(bgcolor) {
        //alert("coolk");
       @foreach (var item in Model.Facilities)
       {
           for (var i = 0; i < item.ResourcesAssigned.Count(); i++)
           {
               if (item.ResourcesAssigned.ElementAt(i).InitialCount != item.ResourcesAssigned.ElementAt(i).CurrentCount)
               {
                   var bgcolor="#FF0000";
                   return bgcolor;

               }
           }
       }
</script>*@

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}

